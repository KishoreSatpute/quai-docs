"use strict";(self.webpackChunkquai_docs=self.webpackChunkquai_docs||[]).push([[8086],{3905:(e,n,t)=>{t.d(n,{Zo:()=>s,kt:()=>h});var i=t(7294);function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function r(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function o(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?r(Object(t),!0).forEach((function(n){a(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):r(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function l(e,n){if(null==e)return{};var t,i,a=function(e,n){if(null==e)return{};var t,i,a={},r=Object.keys(e);for(i=0;i<r.length;i++)t=r[i],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(i=0;i<r.length;i++)t=r[i],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var u=i.createContext({}),c=function(e){var n=i.useContext(u),t=n;return e&&(t="function"==typeof e?e(n):o(o({},n),e)),t},s=function(e){var n=c(e.components);return i.createElement(u.Provider,{value:n},e.children)},p="mdxType",d={inlineCode:"code",wrapper:function(e){var n=e.children;return i.createElement(i.Fragment,{},n)}},m=i.forwardRef((function(e,n){var t=e.components,a=e.mdxType,r=e.originalType,u=e.parentName,s=l(e,["components","mdxType","originalType","parentName"]),p=c(t),m=a,h=p["".concat(u,".").concat(m)]||p[m]||d[m]||r;return t?i.createElement(h,o(o({ref:n},s),{},{components:t})):i.createElement(h,o({ref:n},s))}));function h(e,n){var t=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var r=t.length,o=new Array(r);o[0]=m;var l={};for(var u in n)hasOwnProperty.call(n,u)&&(l[u]=n[u]);l.originalType=e,l[p]="string"==typeof e?e:a,o[1]=l;for(var c=2;c<r;c++)o[c]=t[c];return i.createElement.apply(null,o)}return i.createElement.apply(null,t)}m.displayName="MDXCreateElement"},4988:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>u,contentTitle:()=>o,default:()=>d,frontMatter:()=>r,metadata:()=>l,toc:()=>c});var i=t(7462),a=(t(7294),t(3905));const r={title:"CPU Miner",description:"How to install and run a Quai Network GPU miner.",slug:"/cpu-miner",hide_table_of_contents:!1,sidebar_position:1},o="CPU Miner",l={unversionedId:"participate/run-quai/miner-overview/cpu-miner",id:"participate/run-quai/miner-overview/cpu-miner",title:"CPU Miner",description:"How to install and run a Quai Network GPU miner.",source:"@site/docs/participate/run-quai/miner-overview/cpu-miner.md",sourceDirName:"participate/run-quai/miner-overview",slug:"/cpu-miner",permalink:"/docs/cpu-miner",draft:!1,editUrl:"https://github.com/dominant-strategies/quai-docs/tree/main/docs/participate/run-quai/miner-overview/cpu-miner.md",tags:[],version:"current",lastUpdatedBy:"Juuddi",lastUpdatedAt:1692220643,formattedLastUpdatedAt:"Aug 16, 2023",sidebarPosition:1,frontMatter:{title:"CPU Miner",description:"How to install and run a Quai Network GPU miner.",slug:"/cpu-miner",hide_table_of_contents:!1,sidebar_position:1},sidebar:"participateSidebar",previous:{title:"Miner Overview",permalink:"/docs/miner-overview"},next:{title:"GPU Miner",permalink:"/docs/gpu-miner"}},u={},c=[{value:"Environment Setup",id:"environment-setup",level:2},{value:"Install Dependencies",id:"install-dependencies",level:3},{value:"Install quai-cpu-miner",id:"install-quai-cpu-miner",level:3},{value:"Configuration",id:"configuration",level:3},{value:"Run the Miner",id:"run-the-miner",level:2},{value:"Build",id:"build",level:3},{value:"Start",id:"start",level:3},{value:"Verify",id:"verify",level:3},{value:"Stop",id:"stop",level:3},{value:"Maintain",id:"maintain",level:3},{value:"Updating",id:"updating",level:4}],s={toc:c},p="wrapper";function d(e){let{components:n,...t}=e;return(0,a.kt)(p,(0,i.Z)({},s,t,{components:n,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"cpu-miner"},"CPU Miner"),(0,a.kt)("h2",{id:"environment-setup"},"Environment Setup"),(0,a.kt)("p",null,"Here, we'll be installing quai-cpu-miner, the Go implementation of a Quai Network CPU miner."),(0,a.kt)("h3",{id:"install-dependencies"},"Install Dependencies"),(0,a.kt)("p",null,"To run an instance of quai-cpu-miner, you'll need to have installed and configured a Quai node. The ",(0,a.kt)("a",{parentName:"p",href:"/docs/run-a-node#install-dependencies"},"prerequisites")," to install and run the miner are the same as a node."),(0,a.kt)("p",null,"If you haven't set up your node, we recommend going through the ",(0,a.kt)("a",{parentName:"p",href:"/docs/run-a-node"},"Run A Node page")," before proceeding."),(0,a.kt)("h3",{id:"install-quai-cpu-miner"},"Install quai-cpu-miner"),(0,a.kt)("p",null,"Now that we've installed the base dependencies and configured our node, we can go ahead and clone the ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/dominant-strategies/quai-cpu-miner"},"quai-cpu-miner repo"),"."),(0,a.kt)("p",null,"To install quai-cpu-miner and navigate to its directory, run the following commands:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"git clone https://github.com/dominant-strategies/quai-cpu-miner.git\ncd quai-cpu-miner\n")),(0,a.kt)("p",null,"This will install the main branch to your local machine."),(0,a.kt)("h3",{id:"configuration"},"Configuration"),(0,a.kt)("p",null,"Simply copy the configuration template file ",(0,a.kt)("inlineCode",{parentName:"p"},"config.yaml.dist")," into a local configuration file named ",(0,a.kt)("inlineCode",{parentName:"p"},"config.yaml"),". This can be done by navigating to the config directory and running:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"cp config.yaml.dist config.yaml\n")),(0,a.kt)("p",null,"The default configuration will suffice for the duration of this tutorial. For more advanced users, the config file can be used to set up a connection to the ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/dominant-strategies/go-quai-stratum"},"Quai stratum proxy"),"."),(0,a.kt)("p",null,"Before continuing, make sure to navigate back to the quai-cpu-miner root directory."),(0,a.kt)("h2",{id:"run-the-miner"},"Run the Miner"),(0,a.kt)("h3",{id:"build"},"Build"),(0,a.kt)("p",null,"Similar to the node, we'll need to build the source to run the miner.\nTo build the source via Makefile, run:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"make quai-cpu-miner\n")),(0,a.kt)("h3",{id:"start"},"Start"),(0,a.kt)("p",null,"Prior to running the miner, you must connect to a fully synced node, either local or remote. Once you've connected to a synced node, you can spin up an instance of the miner."),(0,a.kt)("p",null,"Similar to a ",(0,a.kt)("a",{parentName:"p",href:"/docs/run-a-node#run-a-base-node"},"base node"),", a miner mines a \"slice\" down the network hierarchy that includes prime, one region, and one zone chain. To start the miner, you'll need to specify the region, and zone chains that you'd like to mine. Region and zone indices are 0-indexed and range from 0-2."),(0,a.kt)("p",null,"To start the miner, select a region and zone index and run:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"# run in terminal\nmake run-mine region=0 zone=1\n\n# run in background, save log output\nmake run-mine-background region=2 zone=1\n")),(0,a.kt)("p",null,"When choosing which contexts to mine, there are a few important things to consider:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Block difficulty in each context (lower difficulty = higher chance of finding a block)"),(0,a.kt)("li",{parentName:"ul"},"Peer connection latency (related to geographic distance from peers)")),(0,a.kt)("p",null,"Optimizing for latency ",(0,a.kt)("strong",{parentName:"p"},"drastically decreases")," the chance of finding an uncle block for which a decreased block reward is awarded. Miners who select contexts with the ",(0,a.kt)("strong",{parentName:"p"},"lowest block difficulties")," in tandem with ",(0,a.kt)("strong",{parentName:"p"},"minimizing peer latencies")," will generally be the most successful. Our team has provided a ",(0,a.kt)("a",{parentName:"p",href:"/docs/latency#networking-latencies"},"guide to inform optimal context selection")," based on your geographical location for miners."),(0,a.kt)("h3",{id:"verify"},"Verify"),(0,a.kt)("p",null,"Depending on whether or not the miner is running in background, logs will be viewable in different locations."),(0,a.kt)("p",null,"If you're running in the terminal, logs will be piped directly to the terminal and will not be saved. If the miner is running in the background, the miner output will be piped to a mining location specific .log file with the path ",(0,a.kt)("inlineCode",{parentName:"p"},"logs/slice-R-Z.log"),". To view the last 100 lines of log output in Cyprus-1, run:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"tail -f 100 logs/slice-0-0.log\n")),(0,a.kt)("p",null,"You can also easily view miner logs via your favorite IDE, we recommend using this method. Logs are the best way to verify that your miner is running correctly and view information on efficiency and blocks mined."),(0,a.kt)("p",null,"A miner that is actively mining should have log outputs similar to:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"2023/01/11 12:51:23 Mining Block:   [16 22 78] location [0 0] difficulty [29209917 7353733 1913341]\n2023/01/11 12:51:25 Zone block  :   [16 22 78] 0x0000086297dd6d1f635b01e3dc3d0c27d0ed9a571ae4e3e22ba89e876e71e398\n2023/01/11 12:51:25 Mining Block:   [16 22 79] location [0 0] difficulty [29209917 7353733 1914275]\n2023/01/11 12:51:30 Zone block  :   [16 22 79] 0x000007c8d5b6ce6e7958eef2e3d12524538602400d1291744358efc43f57f266\n2023/01/11 12:51:30 Mining Block:   [16 22 80] location [0 0] difficulty [29209917 7353733 1915209]\n2023/01/11 12:51:31 Zone block  :   [16 22 80] 0x000008094cf87697189620a51357b54827828fb9a693cc1e082b36736a406fcd\n2023/01/11 12:51:31 Mining Block:   [16 22 81] location [0 0] difficulty [29209917 7353733 1915209]\n2023/01/11 12:51:33 Zone block  :   [16 22 81] 0x000006fb38aa98adddc3a6b0e5b887a55ea21065f05a5801ddca6aca0deba290\n2023/01/11 12:51:33 Mining Block:   [16 22 82] location [0 0] difficulty [29209917 7353733 1916144]\n2023/01/11 12:51:34 Quai Miner  :   Hashes per second:  734038.5899168133\n")),(0,a.kt)("admonition",{type:"info"},(0,a.kt)("p",{parentName:"admonition"},"The miner logs provide the current block being mined, block type, the hash/second of your machine, and a number of other useful pieces of data.")),(0,a.kt)("h3",{id:"stop"},"Stop"),(0,a.kt)("p",null,"You should stop the miner anytime you plan to pull an update, stop your node for any reason, or are shutting down your machine. A miner instance running the in background can be terminated by running:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"make stop\n")),(0,a.kt)("p",null,"If the miner is running inside your terminal, you can use CTRL+C to kill the process."),(0,a.kt)("h3",{id:"maintain"},"Maintain"),(0,a.kt)("p",null,"Making sure your miner is running correctly is crucial to being successful as a miner and the network as a whole. There are a few ways to verify that your miner is running smoothly."),(0,a.kt)("h4",{id:"updating"},"Updating"),(0,a.kt)("p",null,"Prior to updating your miner, make sure to kill any instances of quai-cpu-miner using the stop command above. After stopping your miner, pull any new code by running:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"git pull\n")),(0,a.kt)("p",null,"After pulling the latest code, you'll need to rebuild the source by running:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"make quai-cpu-miner\n")),(0,a.kt)("p",null,"After completing the steps above, you can restart the miner and continue mining."),(0,a.kt)("admonition",{type:"warning"},(0,a.kt)("p",{parentName:"admonition"},"Starting the miner update process while the node or miner are running could cause issues. Make sure to stop all processes before updating.")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"")))}d.isMDXComponent=!0}}]);
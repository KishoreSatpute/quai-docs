"use strict";(self.webpackChunkquai_docs=self.webpackChunkquai_docs||[]).push([[8592],{3905:(e,o,t)=>{t.d(o,{Zo:()=>p,kt:()=>h});var n=t(7294);function r(e,o,t){return o in e?Object.defineProperty(e,o,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[o]=t,e}function a(e,o){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);o&&(n=n.filter((function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable}))),t.push.apply(t,n)}return t}function i(e){for(var o=1;o<arguments.length;o++){var t=null!=arguments[o]?arguments[o]:{};o%2?a(Object(t),!0).forEach((function(o){r(e,o,t[o])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):a(Object(t)).forEach((function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(t,o))}))}return e}function s(e,o){if(null==e)return{};var t,n,r=function(e,o){if(null==e)return{};var t,n,r={},a=Object.keys(e);for(n=0;n<a.length;n++)t=a[n],o.indexOf(t)>=0||(r[t]=e[t]);return r}(e,o);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)t=a[n],o.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var l=n.createContext({}),c=function(e){var o=n.useContext(l),t=o;return e&&(t="function"==typeof e?e(o):i(i({},o),e)),t},p=function(e){var o=c(e.components);return n.createElement(l.Provider,{value:o},e.children)},u="mdxType",d={inlineCode:"code",wrapper:function(e){var o=e.children;return n.createElement(n.Fragment,{},o)}},f=n.forwardRef((function(e,o){var t=e.components,r=e.mdxType,a=e.originalType,l=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),u=c(t),f=r,h=u["".concat(l,".").concat(f)]||u[f]||d[f]||a;return t?n.createElement(h,i(i({ref:o},p),{},{components:t})):n.createElement(h,i({ref:o},p))}));function h(e,o){var t=arguments,r=o&&o.mdxType;if("string"==typeof e||r){var a=t.length,i=new Array(a);i[0]=f;var s={};for(var l in o)hasOwnProperty.call(o,l)&&(s[l]=o[l]);s.originalType=e,s[u]="string"==typeof e?e:r,i[1]=s;for(var c=2;c<a;c++)i[c]=t[c];return n.createElement.apply(null,i)}return n.createElement.apply(null,t)}f.displayName="MDXCreateElement"},4684:(e,o,t)=>{t.r(o),t.d(o,{assets:()=>l,contentTitle:()=>i,default:()=>d,frontMatter:()=>a,metadata:()=>s,toc:()=>c});var n=t(7462),r=(t(7294),t(3905));const a={title:"Instantaneous Fork Resolution",description:"How blocks are compared in Quai Network.",slug:"/fork-resolution",hide_table_of_contents:!1,sidebar_position:1},i="Instantaneous Fork Resolution",s={unversionedId:"learn/advanced-introduction/poem/instant-fork-resolution/instant-fork-resolution",id:"learn/advanced-introduction/poem/instant-fork-resolution/instant-fork-resolution",title:"Instantaneous Fork Resolution",description:"How blocks are compared in Quai Network.",source:"@site/docs/learn/advanced-introduction/poem/instant-fork-resolution/instant-fork-resolution.md",sourceDirName:"learn/advanced-introduction/poem/instant-fork-resolution",slug:"/fork-resolution",permalink:"/quai-docs/fork-resolution",draft:!1,editUrl:"https://github.com/dominant-strategies/quai-docs/tree/main/docs/learn/advanced-introduction/poem/instant-fork-resolution/instant-fork-resolution.md",tags:[],version:"current",lastUpdatedBy:"Juuddi",lastUpdatedAt:1692116968,formattedLastUpdatedAt:"Aug 15, 2023",sidebarPosition:1,frontMatter:{title:"Instantaneous Fork Resolution",description:"How blocks are compared in Quai Network.",slug:"/fork-resolution",hide_table_of_contents:!1,sidebar_position:1},sidebar:"learnSidebar",previous:{title:"Proof-of-Entropy-Minima (PoEM)",permalink:"/quai-docs/poem"},next:{title:"Intrinsic Block Weight",permalink:"/quai-docs/intrinsic-block-weight"}},l={},c=[{value:"Example Fork Resolution: PoW vs. PoEM",id:"example-fork-resolution-pow-vs-poem",level:2},{value:"Proof-of-Work (PoW)",id:"proof-of-work-pow",level:3},{value:"Proof-of-Entropy-Minima (PoEM)",id:"proof-of-entropy-minima-poem",level:3}],p={toc:c},u="wrapper";function d(e){let{components:o,...a}=e;return(0,r.kt)(u,(0,n.Z)({},p,a,{components:o,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"instantaneous-fork-resolution"},"Instantaneous Fork Resolution"),(0,r.kt)("p",null,"Fork resolution is a significant challenge in blockchain systems. A fork happens when multiple versions of the blockchain are created and proposed at the same time. Forks can occur naturally when two miners find competing blocks, or they can be deliberately created by a bad actor."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"In a Proof-of-Work consensus mechanism, when two blocks that exceed the difficulty threshold are proposed simultaneously, there is no preference for either block.")," They are both considered equally valid progressions of the blockchain. To resolve such a fork, one of the proposed chains needs to be extended to become longer than the other according to the Heaviest Chain Rule (HCR). ",(0,r.kt)("strong",{parentName:"p"},"In systems like Bitcoin, it can take more than 10 minutes to produce another block and resolve the fork.")),(0,r.kt)("p",null,"Forks divide the computational power of the network as miners randomly choose one of the valid blocks to mine, hoping that their chosen block becomes the accepted one. Because Proof-of-Work treats all blocks that meet the difficulty threshold as equal, nodes cannot determine which block to build upon until another block is produced. ",(0,r.kt)("strong",{parentName:"p"},"However, in reality, these blocks are not identical. One block always removes more entropy (randomness) from the system compared to the other proposed blocks.")," Simply put, Proof-of-Work requires nodes to disregard meaningful aspects of proposed hashes, while PoEM allows for the measurement of each hash's full weight."),(0,r.kt)("p",null,"While Proof-of-Work fork resolution has worked for single-chain systems, the prolonged uncertainty it introduces makes it unreliable for achieving consensus with multiple blockchains."),(0,r.kt)("p",null,"Proof-of-Entropy-Minima (PoEM) employs the concept of ",(0,r.kt)("a",{parentName:"p",href:"/quai-docs/intrinsic-block-weight"},"intrinsic block weight")," to enable all nodes in the system to instantly and deterministically select the next block in the sequence. Intrinsic block weight measures the overall weight of a block's hash rather than just checking its difficulty level. ",(0,r.kt)("strong",{parentName:"p"},"By using intrinsic block weight, all blocks can be compared fairly and accurately, allowing nodes to quickly choose which block to extend and resolve conflicts across all chains simultaneously.")),(0,r.kt)("p",null,"Furthermore, PoEM ensures that only a single proof ever needs to be propagated throughout the network to achieve consensus. In contrast, Proof-of-Work requires a second proof to be shared before the network can reach consensus in a fork scenario. Proof-of-Stake consensus necessitates multiple rounds of propagation for each block to achieve consensus, as each proof must collect a specific number of social approvals to be considered valid. ",(0,r.kt)("strong",{parentName:"p"},'By eliminating consensus-based forks, PoEM ensures that consensus can always be reached by propagating a single proof. This approach ensures that miners are always certain of the block that all nodes will agree upon as the "tip" or "head" of the blockchain, resulting in the most efficient possible utilization of computational resources.')),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"NodesForkResolution",src:t(8903).Z,width:"1500",height:"769"})),(0,r.kt)("p",null,'The PoEM mechanism, by removing the impact of latency, fundamentally changes the concept of "consensus." Traditional Proof-of-Work and Proof-of-Stake blockchains periodically attempt to reach consensus among all nodes at each block production point. In contrast, PoEM achieves "perpetual consensus" by eliminating all contention from consensus. All nodes in the system always agree on the "tip" of the blockchain simply by adhering to the Proof-of-Entropy-Minima algorithm. ',(0,r.kt)("strong",{parentName:"p"},"PoEM always has a preference between any blocks or chains of blocks. Therefore, if two nodes are running PoEM, they will always agree, even if they do not have complete information about the system.")),(0,r.kt)("h2",{id:"example-fork-resolution-pow-vs-poem"},"Example Fork Resolution: PoW vs. PoEM"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"ExampleForkResolution",src:t(8107).Z,width:"1500",height:"1015"})),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Block Height: 1"),(0,r.kt)("li",{parentName:"ul"},"Difficulty Threshold: 16 (0x0000...)"),(0,r.kt)("li",{parentName:"ul"},"Proposed Block 2A Hash: 0x0000b9c86d37..."),(0,r.kt)("li",{parentName:"ul"},"Proposed Block 2B Hash: 0x0000b9c86d30...")),(0,r.kt)("h3",{id:"proof-of-work-pow"},"Proof-of-Work (PoW)"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Two different miners independently find the hashes for Block2A and Block2B"),(0,r.kt)("li",{parentName:"ol"},"Block 2A and Block 2B are proposed near-simultaneously"),(0,r.kt)("li",{parentName:"ol"},"Block 2A is assigned a difficulty of 16, and Block 2B is assigned a difficulty of 16"),(0,r.kt)("li",{parentName:"ol"},"Miners mine either Block2A or Block2B, whichever they saw first, until a Block3 is created that canonicalizes either Block2A or Block2B"),(0,r.kt)("li",{parentName:"ol"},"Block 3 is created, canonicalizing either Block2A or Block2B and uncling the non-canonicalized block")),(0,r.kt)("h3",{id:"proof-of-entropy-minima-poem"},"Proof-of-Entropy-Minima (PoEM)"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Two different miners independently find the hashes for Block2A and Block2B"),(0,r.kt)("li",{parentName:"ol"},"Block 2A and Block 2B are proposed near-simultaneously"),(0,r.kt)("li",{parentName:"ol"},"Block 2A is assigned a difficulty of 16.462525964 and Block2B is assigned a difficulty of 16.462525967"),(0,r.kt)("li",{parentName:"ol"},"All nodes and miners will immediately prefer Block2B to Block2A as soon as they are aware of Block2B"),(0,r.kt)("li",{parentName:"ol"},"All miners mine on Block2B to extend the tip of the canonicalized chain")))}d.isMDXComponent=!0},8107:(e,o,t)=>{t.d(o,{Z:()=>n});const n=t.p+"assets/images/ExampleForkResolution-37f9c778604fd72c4228b3e57784a9d5.png"},8903:(e,o,t)=>{t.d(o,{Z:()=>n});const n=t.p+"assets/images/NodesForkResolution-9ba9bf654c02189e6d65f93680ab4e92.png"}}]);